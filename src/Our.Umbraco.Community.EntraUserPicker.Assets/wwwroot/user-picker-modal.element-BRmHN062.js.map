{"version":3,"file":"user-picker-modal.element-BRmHN062.js","sources":["../../Our.Umbraco.Community.EntraUserPicker.Client/Client/src/user/modals/user-picker-modal.element.ts"],"sourcesContent":["// import { UmbUserCollectionRepository } from '../../collection/repository/user-collection.repository.js';\r\n// import { UmbUserCollectionRepository } from '@umbraco-cms/backoffice/user';\r\n// import type { UmbUserItemModel } from '../../repository/item/index.js';\r\n// import type { UmbUserItemModel } from '@umbraco-cms/backoffice/user';\r\n\r\nimport type { UmbUserPickerModalData, UmbUserPickerModalValue } from './user-picker-modal.token.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { PropertyValueMap } from '@umbraco-cms/backoffice/external/lit';\r\n// import { css, html, customElement, state, ifDefined } from '@umbraco-cms/backoffice/external/lit';\r\nimport { css, html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbSelectionManager } from '@umbraco-cms/backoffice/utils';\r\n\r\n@customElement('umb-user-picker-modal')\r\nexport class UmbUserPickerModalElement extends UmbModalBaseElement<UmbUserPickerModalData, UmbUserPickerModalValue> {\r\n\t// @state()\r\n\t// private _users: Array<UmbUserItemModel> = [];\r\n\r\n\t#selectionManager = new UmbSelectionManager(this);\r\n\t// #userCollectionRepository = new UmbUserCollectionRepository(this);\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\t// TODO: in theory this config could change during the lifetime of the modal, so we could observe it\r\n\t\tthis.#selectionManager.setMultiple(this.data?.multiple ?? false);\r\n\t\tthis.#selectionManager.setSelection(this.value?.selection ?? []);\r\n\t}\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.#requestUsers();\r\n\t}\r\n\r\n\tasync #requestUsers() {\r\n\t\tconsole.log('requesting users');\r\n\t\t// if (!this.#userCollectionRepository) return;\r\n\t\t// const { data } = await this.#userCollectionRepository.requestCollection();\r\n\r\n\t\t// if (data) {\r\n\t\t// \tthis._users = data.items;\r\n\t\t// }\r\n\t}\r\n\r\n\t#submit() {\r\n\t\tthis.value = { selection: this.#selectionManager.getSelection() };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('defaultdialogs_selectUsers')}>\r\n\t\t\t\t\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button label=\"Close\" @click=${this.#close}></uui-button>\r\n\t\t\t\t\t<uui-button label=\"Submit\" look=\"primary\" color=\"positive\" @click=${this.#submit}></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tumb-user-avatar {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbUserPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-picker-modal': UmbUserPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_selectionManager","_UmbUserPickerModalElement_instances","requestUsers_fn","submit_fn","close_fn","UmbUserPickerModalElement","UmbModalBaseElement","__privateAdd","UmbSelectionManager","__privateGet","_a","_b","_changedProperties","__privateMethod","html","UmbTextStyles","css","__decorateClass","customElement","UmbUserPickerModalElement$1"],"mappings":";;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAca,IAAAC,IAAN,cAAwCC,EAAqE;AAAA,EAA7G,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAN,CAAA,GAIcM,EAAA,MAAAP,GAAA,IAAIQ,EAAoB,IAAI,CAAA;AAAA,EAAA;AAAA;AAAA,EAGvC,oBAA0B;;AAClC,UAAM,kBAAkB,GAGxBC,EAAA,MAAKT,CAAkB,EAAA,cAAYU,IAAA,KAAK,SAAL,gBAAAA,EAAW,aAAY,EAAK,GAC/DD,EAAA,MAAKT,GAAkB,eAAaW,IAAA,KAAK,UAAL,gBAAAA,EAAY,cAAa,CAAA,CAAE;AAAA,EAChE;AAAA,EAEmB,aAAaC,GAA6E;AAC5G,UAAM,aAAaA,CAAkB,GACrCC,EAAA,MAAKZ,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,EACD;AAAA,EAqBS,SAAS;AACV,WAAAY;AAAA,+BACsB,KAAK,SAAS,KAAK,4BAA4B,CAAC;AAAA;AAAA;AAAA,wCAGvCD,QAAKZ,GAAMG,CAAA,CAAA;AAAA,yEACsBS,QAAKZ,GAAOE,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA,EAIpF;AAUD;AAvDCH,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAoBAC,IAAa,iBAAG;AACrB,UAAQ,IAAI,kBAAkB;AAO/B;AAEAC,IAAO,WAAG;;AACT,OAAK,QAAQ,EAAE,WAAWM,EAAK,MAAAT,CAAA,EAAkB,mBACjDU,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACpB;AAEAN,IAAM,WAAG;;AACR,GAAAM,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACpB;AArCYL,EAmDI,SAAS;AAAA,EACxBU;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AA1DYX,IAANY,EAAA;AAAA,EADNC,EAAc,uBAAuB;AAAA,GACzBb,CAAA;AA6Db,MAAAc,IAAed;"}